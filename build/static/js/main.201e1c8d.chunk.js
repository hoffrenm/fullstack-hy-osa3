(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},20:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(14),u=t.n(o),c=(t(20),t(2)),l=function(e){var n=e.filter,t=e.handleFilterChange;return r.a.createElement("p",null,"Filter list by name ",r.a.createElement("input",{value:n,onChange:t}))},i=function(e){var n=e.person,t=e.handleRemove;return r.a.createElement("p",null,n.name," ",n.number," ",r.a.createElement("button",{onClick:function(){return t(n.id)}},"Remove"))},m=function(e){var n=e.persons,t=e.filter,a=e.handleRemove;return n=n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})),r.a.createElement(r.a.Fragment,null,n.map((function(e){return r.a.createElement(i,{key:e.id,person:e,handleRemove:a})})))},s=function(e){var n=e.handleSubmit,t=e.name,a=e.number,o=e.handleNameChange,u=e.handleNumberChange;return r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,"Name ",r.a.createElement("input",{value:t,onChange:o}),r.a.createElement("br",null),"Number ",r.a.createElement("input",{value:a,onChange:u})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"Submit")))},d=t(3),f=t.n(d),h="/api/persons",b=function(){return f.a.get(h).then((function(e){return e.data}))},p=function(e){return f.a.post(h,e).then((function(e){return e.data}))},g=function(e,n){return f.a.put("".concat(h,"/").concat(e),n).then((function(e){return e.data}))},v=function(e){return f.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.data}))},E=t(4),y={fontSize:24,textAlign:"center",background:"lightgrey",borderRadius:10,borderStyle:"solid",width:600,padding:10,marginBottom:15,color:"red",borderColor:"red"},C=function(e){var n=e.message,t=e.type;if(null===n)return null;var a=Object(E.a)({},y);return"success"===t&&(a=Object(E.a)({},y,{color:"green",borderColor:"green"})),r.a.createElement("div",{style:a},n)},w=function(){var e=Object(a.useState)([]),n=Object(c.a)(e,2),t=n[0],o=n[1],u=Object(a.useState)(""),i=Object(c.a)(u,2),d=i[0],f=i[1],h=Object(a.useState)(""),E=Object(c.a)(h,2),y=E[0],w=E[1],j=Object(a.useState)(""),O=Object(c.a)(j,2),S=O[0],k=O[1],N=Object(a.useState)({message:null,type:null}),R=Object(c.a)(N,2),F=R[0],L=R[1];Object(a.useEffect)((function(){b().then((function(e){o(e)}))}),[]);var x=function(e){L(e),setTimeout((function(){L({message:null,type:null})}),5e3)};return r.a.createElement("div",null,r.a.createElement("h1",null,"Phonebook"),r.a.createElement(C,{message:F.message,type:F.type}),r.a.createElement(l,{filter:S,handleFilterChange:function(e){k(e.target.value)}}),r.a.createElement("h2",null,"Add a new"),r.a.createElement(s,{handleSubmit:function(e){e.preventDefault();var n=t.find((function(e){return e.name.toLowerCase()===d.toLowerCase()})),a={name:d,number:y};n?window.confirm("".concat(d," is already added to phonebook, do you want to replace the number?"))&&g(n.id,a).then((function(e){x({message:"".concat(e.name,"'s number has been changed to ").concat(e.number),type:"success"}),o(t.map((function(t){return t.id!==n.id?t:e})))})).catch((function(e){x({message:e.response.data.error,type:"error"}),404===e.response.status&&o(t.filter((function(e){return e.id!==n.id})))})):p(a).then((function(e){x({message:"".concat(e.name," has been added to phonebook"),type:"success"}),o(t.concat(e))})).catch((function(e){return x({message:e.response.data.error,type:"error"})})),f(""),w("")},name:d,number:y,handleNameChange:function(e){f(e.target.value)},handleNumberChange:function(e){w(e.target.value)}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(m,{persons:t,filter:S,handleRemove:function(e){var n=t.find((function(n){return n.id===e}));window.confirm("You are about to delete ".concat(n.name,", proceed?"))&&v(e).then((function(){x({message:"".concat(n.name," has been removed"),type:"success"}),o(t.filter((function(n){return n.id!==e})))})).catch((function(){x({message:"".concat(n.name," was already removed from server"),type:"error"}),o(t.filter((function(n){return n.id!==e})))}))}}))};u.a.render(r.a.createElement(w,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.201e1c8d.chunk.js.map